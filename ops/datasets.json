{
    "fasta": {
        "description": "reference genome from Broad in gzipped fasta",
        "version": "GRCh37",
        "hash": {
            "type": "md5",
            "value": "dd05833f18c22cc501e3e31406d140b0"
        },
        "destination": "FASTA",
        "retries": 5,
        "generate": [
            "wget -c ftp://gsapubftp-anonymous@ftp.broadinstitute.org/bundle/b37/human_g1k_v37_decoy*",
            "cat human_g1k_v37_decoy.dict.gz.md5 human_g1k_v37_decoy.fasta.gz.md5 human_g1k_v37_decoy.fasta.fai.gz.md5 | awk  'BEGIN {{FS=\"[ /]+\" }} {{ print $1\" \"$NF }}' - | md5sum -c",
            "echo '{hash_value} human_g1k_v37_decoy.fasta.gz' | {hash_type}sum -c",
            "gunzip *.gz",
            "bgzip human_g1k_v37_decoy.fasta -c > human_g1k_v37_decoy.fasta.gz",
            "bgzip -r human_g1k_v37_decoy.fasta.gz",
            "cp human_g1k_v37_decoy.fasta.fai human_g1k_v37_decoy.fasta.gz.fai",
            "faidx -i chromsizes human_g1k_v37_decoy.fasta -o human_g1k_v37_decoy.chromsizes",
            "rm *.md5",
            "mv human_g1k_v37_decoy* {data_dir}"
        ]
    },
    "vep": {
        "description": "offline VEP cache",
        "destination": "VEP/cache",
        "version": "{vep_version}",
        "thirdparty-name": "ensembl-vep-release",
        "generate": [
            "perl {thirdparty}/INSTALL.pl -a cf -l -n -s homo_sapiens_merged -y GRCh37 -c {data_dir}"
        ]
    },
    "refgene": {
        "description": "refGene database for slicing gnomAD data",
        "version": "20200319",
        "hash": {
            "type": "md5",
            "value": "1b028ad27b0c66dfdeb1ef73b9e9ddc1"
        },
        "vars": {
            "hg_build": "hg19"
        },
        "destination": "refGene",
        "generate": [
            "wget http://hgdownload.soe.ucsc.edu/goldenPath/{hg_build}/database/refGene.txt.gz",
            "echo '{hash_value} refGene.txt.gz' | {hash_type}sum -c",
            "LATEST=$({root_dir}/scripts/get_versions -p refgene -l); wget https://ella-anno.fra1.digitaloceanspaces.com/data/{destination}/$LATEST/refGeneHistorical.csv.gz",
            "gunzip refGeneHistorical.csv.gz",
            "DATE=$(date -d \"$(curl -sI http://hgdownload.soe.ucsc.edu/goldenPath/{hg_build}/database/refGene.txt.gz | grep Last-Mod | cut -f2- -d' ')\" +%Y-%m-%d); zcat refGene.txt.gz | sed -e \"s/$/\t$DATE/\" >> refGeneHistorical.csv",
            "gzip refGeneHistorical.csv",
            "cp refGeneHistorical.csv.gz refgene_{hg_build}_{version}.bed {data_dir}/"
        ]
    },
    "refseq": {
        "description": "RefSeq identifiers suitable for VEP annotation. More up to date and fixes alignment not handled by VEP refseq cache",
        "version": "20191105",
        "hash": {
            "type": "md5",
            "value": "e84f4e0102b6c4f4cc0035b8abf1038f"
        },
        "destination": "RefSeq",
        "generate": [
            "wget -O GRCh37_refseq_{version}.gff.gz ftp://ftp.ncbi.nlm.nih.gov/refseq/H_sapiens/annotation/GRCh37_latest/refseq_identifiers/GRCh37_latest_genomic.gff.gz",
            "echo '{hash_value} GRCh37_refseq_{version}.gff.gz' | {hash_type}sum -c",
            "zgrep -v '^#' GRCh37_refseq_{version}.gff.gz | sort -k1,1 -k4,4n -k5,5n -t '\t' | bgzip -c > GRCh37_refseq_{version}_VEP.gff.gz",
            "tabix -p gff GRCh37_refseq_{version}_VEP.gff.gz",
            "mv GRCh37_refseq_{version}_VEP.gff.gz* {data_dir}"
        ]
    },
    "refseq_interim": {
        "description": "RefSeq identifiers suitable for VEP annotation. See https://blog.goldenhelix.com/updating-varseqs-transcript-annotation-along-with-ncbi-refseq-genes-interim-release/",
        "version": "20170113",
        "hash": {
            "type": "md5",
            "value": "ea1627a1b54bf130e364c90f94a130dd"
        },
        "destination": "RefSeq_interim",
        "generate": [
            "wget -O GRCh37_refseq_interim_{version}.gff.gz ftp://ftp.ncbi.nlm.nih.gov/genomes/Homo_sapiens/ARCHIVE/ANNOTATION_RELEASE.109/GRCh37.p13_interim_annotation/interim_GRCh37.p13_top_level_2017-01-13.gff3.gz",
            "echo '{hash_value} GRCh37_refseq_interim_{version}.gff.gz' | {hash_type}sum -c",
            "zgrep -v '^#' GRCh37_refseq_interim_{version}.gff.gz | sort -k1,1 -k4,4n -k5,5n -t '\t' | bgzip -c > GRCh37_refseq_interim_{version}_VEP.gff.gz",
            "tabix -p gff GRCh37_refseq_interim_{version}_VEP.gff.gz",
            "mv GRCh37_refseq_interim_{version}_VEP.gff.gz* {data_dir}"
        ]
    },
    "gnomad": {
        "description": "gnomAD variant database",
        "version": "2.0.2",
        "destination": "variantDBs/gnomAD",
        "generate": [
            "{root_dir}/scripts/gnomad/download_gnomad.sh -r {version}",
            "{root_dir}/scripts/gnomad/gnomad_process_data.sh -v {version} "
        ],
        "vcfanno": [
            {
                "file": "{destination}/gnomad.exomes.r{version}.norm.vcf.gz",
                "fields": [
                    "OLD_MULTIALLELIC",
                    "AC",
                    "AC_AFR",
                    "AC_AMR",
                    "AC_ASJ",
                    "AC_EAS",
                    "AC_FIN",
                    "AC_NFE",
                    "AC_OTH",
                    "AC_SAS",
                    "AC_Male",
                    "AC_Female",
                    "AF",
                    "AF_AFR",
                    "AF_AMR",
                    "AF_ASJ",
                    "AF_EAS",
                    "AF_FIN",
                    "AF_NFE",
                    "AF_OTH",
                    "AF_SAS",
                    "AF_Male",
                    "AF_Female",
                    "AN",
                    "AN_AFR",
                    "AN_AMR",
                    "AN_ASJ",
                    "AN_EAS",
                    "AN_FIN",
                    "AN_NFE",
                    "AN_OTH",
                    "AN_SAS",
                    "AN_Male",
                    "AN_Female",
                    "BaseQRankSum",
                    "ClippingRankSum",
                    "DB",
                    "DP",
                    "FS",
                    "Hemi",
                    "Hemi_AFR",
                    "Hemi_AMR",
                    "Hemi_ASJ",
                    "Hemi_EAS",
                    "Hemi_FIN",
                    "Hemi_NFE",
                    "Hemi_OTH",
                    "Hemi_SAS",
                    "Hom",
                    "Hom_AFR",
                    "Hom_AMR",
                    "Hom_ASJ",
                    "Hom_EAS",
                    "Hom_FIN",
                    "Hom_NFE",
                    "Hom_OTH",
                    "Hom_SAS",
                    "Hom_Male",
                    "Hom_Female",
                    "GC_AFR",
                    "GC_AMR",
                    "GC_ASJ",
                    "GC_EAS",
                    "GC_FIN",
                    "GC_NFE",
                    "GC_OTH",
                    "GC_SAS",
                    "GC_Male",
                    "GC_Female",
                    "InbreedingCoeff",
                    "MQ",
                    "MQRankSum",
                    "QD",
                    "ReadPosRankSum",
                    "AS_RF",
                    "AS_FilterStatus"
                ],
                "names": [
                    "GNOMAD_EXOMES__MULTIALLELIC",
                    "GNOMAD_EXOMES__AC",
                    "GNOMAD_EXOMES__AC_AFR",
                    "GNOMAD_EXOMES__AC_AMR",
                    "GNOMAD_EXOMES__AC_ASJ",
                    "GNOMAD_EXOMES__AC_EAS",
                    "GNOMAD_EXOMES__AC_FIN",
                    "GNOMAD_EXOMES__AC_NFE",
                    "GNOMAD_EXOMES__AC_OTH",
                    "GNOMAD_EXOMES__AC_SAS",
                    "GNOMAD_EXOMES__AC_Male",
                    "GNOMAD_EXOMES__AC_Female",
                    "GNOMAD_EXOMES__AF",
                    "GNOMAD_EXOMES__AF_AFR",
                    "GNOMAD_EXOMES__AF_AMR",
                    "GNOMAD_EXOMES__AF_ASJ",
                    "GNOMAD_EXOMES__AF_EAS",
                    "GNOMAD_EXOMES__AF_FIN",
                    "GNOMAD_EXOMES__AF_NFE",
                    "GNOMAD_EXOMES__AF_OTH",
                    "GNOMAD_EXOMES__AF_SAS",
                    "GNOMAD_EXOMES__AF_Male",
                    "GNOMAD_EXOMES__AF_Female",
                    "GNOMAD_EXOMES__AN",
                    "GNOMAD_EXOMES__AN_AFR",
                    "GNOMAD_EXOMES__AN_AMR",
                    "GNOMAD_EXOMES__AN_ASJ",
                    "GNOMAD_EXOMES__AN_EAS",
                    "GNOMAD_EXOMES__AN_FIN",
                    "GNOMAD_EXOMES__AN_NFE",
                    "GNOMAD_EXOMES__AN_OTH",
                    "GNOMAD_EXOMES__AN_SAS",
                    "GNOMAD_EXOMES__AN_Male",
                    "GNOMAD_EXOMES__AN_Female",
                    "GNOMAD_EXOMES__BaseQRankSum",
                    "GNOMAD_EXOMES__ClippingRankSum",
                    "GNOMAD_EXOMES__DB",
                    "GNOMAD_EXOMES__DP",
                    "GNOMAD_EXOMES__FS",
                    "GNOMAD_EXOMES__Hemi",
                    "GNOMAD_EXOMES__Hemi_AFR",
                    "GNOMAD_EXOMES__Hemi_AMR",
                    "GNOMAD_EXOMES__Hemi_ASJ",
                    "GNOMAD_EXOMES__Hemi_EAS",
                    "GNOMAD_EXOMES__Hemi_FIN",
                    "GNOMAD_EXOMES__Hemi_NFE",
                    "GNOMAD_EXOMES__Hemi_OTH",
                    "GNOMAD_EXOMES__Hemi_SAS",
                    "GNOMAD_EXOMES__Hom",
                    "GNOMAD_EXOMES__Hom_AFR",
                    "GNOMAD_EXOMES__Hom_AMR",
                    "GNOMAD_EXOMES__Hom_ASJ",
                    "GNOMAD_EXOMES__Hom_EAS",
                    "GNOMAD_EXOMES__Hom_FIN",
                    "GNOMAD_EXOMES__Hom_NFE",
                    "GNOMAD_EXOMES__Hom_OTH",
                    "GNOMAD_EXOMES__Hom_SAS",
                    "GNOMAD_EXOMES__Hom_Male",
                    "GNOMAD_EXOMES__Hom_Female",
                    "GNOMAD_EXOMES__GC_AFR",
                    "GNOMAD_EXOMES__GC_AMR",
                    "GNOMAD_EXOMES__GC_ASJ",
                    "GNOMAD_EXOMES__GC_EAS",
                    "GNOMAD_EXOMES__GC_FIN",
                    "GNOMAD_EXOMES__GC_NFE",
                    "GNOMAD_EXOMES__GC_OTH",
                    "GNOMAD_EXOMES__GC_SAS",
                    "GNOMAD_EXOMES__GC_Male",
                    "GNOMAD_EXOMES__GC_Female",
                    "GNOMAD_EXOMES__InbreedingCoeff",
                    "GNOMAD_EXOMES__MQ",
                    "GNOMAD_EXOMES__MQRankSum",
                    "GNOMAD_EXOMES__QD",
                    "GNOMAD_EXOMES__ReadPosRankSum",
                    "GNOMAD_EXOMES__AS_RF",
                    "GNOMAD_EXOMES__AS_FilterStatus"
                ],
                "ops": [
                    "flag",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first"
                ]
            },
            {
                "file": "{destination}/gnomad.genomes.r{version}.norm.vcf.gz",
                "fields": [
                    "OLD_MULTIALLELIC",
                    "AC",
                    "AC_AFR",
                    "AC_AMR",
                    "AC_ASJ",
                    "AC_EAS",
                    "AC_FIN",
                    "AC_NFE",
                    "AC_OTH",
                    "AC_SAS",
                    "AC_Male",
                    "AC_Female",
                    "AF",
                    "AF_AFR",
                    "AF_AMR",
                    "AF_ASJ",
                    "AF_EAS",
                    "AF_FIN",
                    "AF_NFE",
                    "AF_OTH",
                    "AF_SAS",
                    "AF_Male",
                    "AF_Female",
                    "AN",
                    "AN_AFR",
                    "AN_AMR",
                    "AN_ASJ",
                    "AN_EAS",
                    "AN_FIN",
                    "AN_NFE",
                    "AN_OTH",
                    "AN_SAS",
                    "AN_Male",
                    "AN_Female",
                    "BaseQRankSum",
                    "ClippingRankSum",
                    "DB",
                    "DP",
                    "FS",
                    "Hemi",
                    "Hemi_AFR",
                    "Hemi_AMR",
                    "Hemi_ASJ",
                    "Hemi_EAS",
                    "Hemi_FIN",
                    "Hemi_NFE",
                    "Hemi_OTH",
                    "Hemi_SAS",
                    "Hom",
                    "Hom_AFR",
                    "Hom_AMR",
                    "Hom_ASJ",
                    "Hom_EAS",
                    "Hom_FIN",
                    "Hom_NFE",
                    "Hom_OTH",
                    "Hom_SAS",
                    "Hom_Male",
                    "Hom_Female",
                    "GC_AFR",
                    "GC_AMR",
                    "GC_ASJ",
                    "GC_EAS",
                    "GC_FIN",
                    "GC_NFE",
                    "GC_OTH",
                    "GC_SAS",
                    "GC_Male",
                    "GC_Female",
                    "InbreedingCoeff",
                    "MQ",
                    "MQRankSum",
                    "QD",
                    "ReadPosRankSum",
                    "AS_RF",
                    "AS_FilterStatus"
                ],
                "names": [
                    "GNOMAD_GENOMES__MULTIALLELIC",
                    "GNOMAD_GENOMES__AC",
                    "GNOMAD_GENOMES__AC_AFR",
                    "GNOMAD_GENOMES__AC_AMR",
                    "GNOMAD_GENOMES__AC_ASJ",
                    "GNOMAD_GENOMES__AC_EAS",
                    "GNOMAD_GENOMES__AC_FIN",
                    "GNOMAD_GENOMES__AC_NFE",
                    "GNOMAD_GENOMES__AC_OTH",
                    "GNOMAD_GENOMES__AC_SAS",
                    "GNOMAD_GENOMES__AC_Male",
                    "GNOMAD_GENOMES__AC_Female",
                    "GNOMAD_GENOMES__AF",
                    "GNOMAD_GENOMES__AF_AFR",
                    "GNOMAD_GENOMES__AF_AMR",
                    "GNOMAD_GENOMES__AF_ASJ",
                    "GNOMAD_GENOMES__AF_EAS",
                    "GNOMAD_GENOMES__AF_FIN",
                    "GNOMAD_GENOMES__AF_NFE",
                    "GNOMAD_GENOMES__AF_OTH",
                    "GNOMAD_GENOMES__AF_SAS",
                    "GNOMAD_GENOMES__AF_Male",
                    "GNOMAD_GENOMES__AF_Female",
                    "GNOMAD_GENOMES__AN",
                    "GNOMAD_GENOMES__AN_AFR",
                    "GNOMAD_GENOMES__AN_AMR",
                    "GNOMAD_GENOMES__AN_ASJ",
                    "GNOMAD_GENOMES__AN_EAS",
                    "GNOMAD_GENOMES__AN_FIN",
                    "GNOMAD_GENOMES__AN_NFE",
                    "GNOMAD_GENOMES__AN_OTH",
                    "GNOMAD_GENOMES__AN_SAS",
                    "GNOMAD_GENOMES__AN_Male",
                    "GNOMAD_GENOMES__AN_Female",
                    "GNOMAD_GENOMES__BaseQRankSum",
                    "GNOMAD_GENOMES__ClippingRankSum",
                    "GNOMAD_GENOMES__DB",
                    "GNOMAD_GENOMES__DP",
                    "GNOMAD_GENOMES__FS",
                    "GNOMAD_GENOMES__Hemi",
                    "GNOMAD_GENOMES__Hemi_AFR",
                    "GNOMAD_GENOMES__Hemi_AMR",
                    "GNOMAD_GENOMES__Hemi_ASJ",
                    "GNOMAD_GENOMES__Hemi_EAS",
                    "GNOMAD_GENOMES__Hemi_FIN",
                    "GNOMAD_GENOMES__Hemi_NFE",
                    "GNOMAD_GENOMES__Hemi_OTH",
                    "GNOMAD_GENOMES__Hemi_SAS",
                    "GNOMAD_GENOMES__Hom",
                    "GNOMAD_GENOMES__Hom_AFR",
                    "GNOMAD_GENOMES__Hom_AMR",
                    "GNOMAD_GENOMES__Hom_ASJ",
                    "GNOMAD_GENOMES__Hom_EAS",
                    "GNOMAD_GENOMES__Hom_FIN",
                    "GNOMAD_GENOMES__Hom_NFE",
                    "GNOMAD_GENOMES__Hom_OTH",
                    "GNOMAD_GENOMES__Hom_SAS",
                    "GNOMAD_GENOMES__Hom_Male",
                    "GNOMAD_GENOMES__Hom_Female",
                    "GNOMAD_GENOMES__GC_AFR",
                    "GNOMAD_GENOMES__GC_AMR",
                    "GNOMAD_GENOMES__GC_ASJ",
                    "GNOMAD_GENOMES__GC_EAS",
                    "GNOMAD_GENOMES__GC_FIN",
                    "GNOMAD_GENOMES__GC_NFE",
                    "GNOMAD_GENOMES__GC_OTH",
                    "GNOMAD_GENOMES__GC_SAS",
                    "GNOMAD_GENOMES__GC_Male",
                    "GNOMAD_GENOMES__GC_Female",
                    "GNOMAD_GENOMES__InbreedingCoeff",
                    "GNOMAD_GENOMES__MQ",
                    "GNOMAD_GENOMES__MQRankSum",
                    "GNOMAD_GENOMES__QD",
                    "GNOMAD_GENOMES__ReadPosRankSum",
                    "GNOMAD_GENOMES__AS_RF",
                    "GNOMAD_GENOMES__AS_FilterStatus"
                ],
                "ops": [
                    "flag",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first",
                    "first"
                ]
            }
        ]
    },
    "clinvar": {
        "description": "clinvar variant database",
        "version": "20210529",
        "destination": "variantDBs/clinvar",
        "generate": [
            "python3 {root_dir}/scripts/clinvar/clinvardb_to_vcf.py -np {max_procs} -o clinvar_{version}.vcf --no-archive --debug",
            "python3 {root_dir}/scripts/clinvar/pubmed_ids_from_clinvarvcf.py clinvar_{version}.vcf.gz > clinvar_{version}_pubmed_ids.txt",
            "mv clinvar_{version}.vcf.gz* {data_dir}",
            "mv clinvar_{version}_pubmed_ids.txt {data_dir}"
        ],
        "vcfanno": [
            {
                "file": "{destination}/clinvar_{version}.vcf.gz",
                "fields": ["CLINVARJSON"],
                "names": ["CLINVARJSON"],
                "ops": ["first"]
            }
        ]
    },
    "seqrepo": {
        "description": "biocommons seqrepo data",
        "version": "2021-01-29",
        "destination": "seqrepo",
        "generate": [
            "seqrepo -r {data_dir} -v pull --instance-name {version}",
            "[[ -d {data_dir}/{version} ]] || (echo downloaded version does not match; exit 1)",
            "cd {data_dir}; ln -sf {version} latest"
        ]
    },
    "uta": {
        "description": "biocommons universal transcript archive",
        "version": "20210129",
        "destination": "uta",
        "hash": {
            "type": "sha1",
            "value": "479e5eb667475ceb08170cf03daf3744e7c99b09"
        },
        "generate": [
            "wget -nc http://dl.biocommons.org/uta/uta_{version}.pgd.gz",
            "echo '{hash_value} uta_{version}.pgd.gz' | {hash_type}sum -c",
            "rm -rf $(pwd)/pg_uta",
            "UTA_VERSION={version} PGDATA=$(pwd)/pg_uta /anno/scripts/uta/restore_from_dump",
            "mv pg_uta/* {data_dir}"
        ]
    }
}
